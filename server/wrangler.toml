name = "pushover-scheduler"
main = "src/index.ts"
compatibility_date = "2024-01-01"
assets = { directory = "../web/dist" }

# Durable Objects 配置
[[durable_objects.bindings]]
name = "SCHEDULER"
class_name = "SchedulerDO"

# 迁移配置（免费计划使用 SQLite 类）
[[migrations]]
tag = "v1"
new_sqlite_classes = ["SchedulerDO"]

# 环境变量（请填入你的密钥）
[vars]
PUSHOVER_API_URL = "https://api.pushover.net/1/messages.json"
TIMEZONE = "Asia/Shanghai"
# AUTH_PASSWORD = "your-password"  # 设置后启用认证

[observability]
enabled = false
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = false
persist = true
head_sampling_rate = 1
# 敏感信息使用 secrets（更安全，不会提交到 git）
# 在部署前运行：
# wrangler secret put PUSHOVER_USER_KEY
# wrangler secret put PUSHOVER_API_TOKEN
